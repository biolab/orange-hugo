<html>    
    <head>
    <title>Orange Data Mining - How to identify fake news with document embeddings</title>

    
    
    <meta property="og:title" content="How to identify fake news with document embeddings">
    
    
    <meta property="og:description" content="New Document embedder widget and its use for classification">
    
    
    <meta property="og:image" content="/blog_img/2020/2020-10-15-document-embedding-widget.png">
    

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Orange Data Mining Toolbox">
    <meta name="author" content="Bioinformatics Laboratory, University of Ljubljana">
    <meta name="google-site-verification" content="DS7GH5M7ABi78pIC2rMcTBFx-UeBFObXOeLvR7Ow3EQ" />
    <link rel="shortcut icon" href="/images/favicon.ico">
    
    <link href='https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Covered+By+Your+Grace' rel='stylesheet' type='text/css'>
    
    <link rel="stylesheet" href="/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/plugins/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="/plugins/lightgallery/css/lightgallery.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    
    
    
    <link rel="stylesheet" href="/scss/main.58e8531e166454b3665e4c7132aa2f1762a5569c179efa4bbf56b266ce93bfac.css">
    <script id="dsq-count-scr" src="//orange-4.disqus.com/count.js" async></script>

    <noscript>
        <style>
            .jsonly { display: none !important; }
        </style>
    </noscript>
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-528382-1', 'auto');
      ga('require', 'linkid');
      ga('send', 'pageview');


    </script>




    <script type="text/javascript" src="/plugins/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="/plugins/jquery.form.js"></script>
    <script type="text/javascript" src="/plugins/bootstrap/js/bootstrap.min.js"></script>
    
    <script type="text/javascript" src="/plugins/lightgallery/js/lightgallery.js"></script>
    <script type="text/javascript" src="/plugins/lightgallery/js/lg-thumbnail.js"></script>
    <script type="text/javascript" src="/plugins/lightgallery/js/lg-video.js"></script>
    <script type="text/javascript" src="/plugins/lightgallery/js/lg-zoom.js"></script>
    <script type="text/javascript" src="/js/custom.js"></script>
    <script type="text/javascript" src="/js/header_helpers.js"></script>


    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-T5X4T27');</script>
    

    
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T5X4T27"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    

    
    <script type="text/javascript">
      $( document ).ready( function () {

        $('a').off("click").click( function ( event ) {
           ga('send', 'event', "a", event.type, $(this).attr("id"), 1 );
        });

        $('[class *= trackClicks_]').off("click").click( function ( event ) {
           var classList = $(this).attr('class').split(/\s+/);
           var trackname = "";
           $.each(classList, function(index, item) {
             if (item.indexOf('trackClicks_') === 0) {
                trackname = item;
             }
           });
           ga('send', 'event', "a", event.type, trackname, 1 );
        });
      });
    </script>

</head>

    <body>

    <header id="top" class="header navbar-fixed-top">
  <div class="container" >
      <h1 class="logo pull-left" >
          <a id="header-orangelogo" href="/">
              <img id="logo-image" class="logo-image" src="/images/orange_logo_hq.png" alt="Logo">
          </a>
      </h1>
      <nav id="main-nav" class="main-nav navbar-right" role="navigation">
          <div class="navbar-header">
              <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-collapse">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
              </button>
          </div>
         <div class="navbar-collapse collapse" id="navbar-collapse">
              <ul class="nav navbar-nav">

                  

                  
                  
                      
                      <li class="nav-item"><a id="header-screenshots-link"  href="/screenshots/">Screenshots</a></li>
                      
                  
                
              

                  
                  
                      
                      <li class="nav-item"><a id="header-screenshots-link"  href="/workflows/">Workflows</a></li>
                      
                  
                
              

                  
                  
                      
                      <li class="nav-item"><a id="header-screenshots-link"  href="/download/">Download</a></li>
                      
                  
                
              

                  
                  
                      
                      <li class="nav-item"><a id="header-screenshots-link"  href="/blog/">Blog</a></li>
                      
                  
                
              

                  
                  
                      
                      <li class="nav-item"><a id="header-screenshots-link"  href="/docs/">Docs</a></li>
                      
                  
                
              

                  
                  
                      
                      <li class="nav-item"><a id="header-screenshots-link"  href="/training/">Workshops</a></li>
                      
                  
                
              

                  
                      <li class="nav-search-wrapper">
                        <div>                         
                          
                          <a class="btn nav-btn-search btn-warning nav-btn fa fa-search nav-btn-desktop" 
                            id="search-btn-js" 
                            role="button">
                          </a>
                          
                          
                          <a class="btn nav-btn-search btn-warning nav-btn fa fa-search nav-btn-mobile" 
                            role="button" 
                            href="/search/?q=">
                          </a>

                          <input type="text" 
                                class="header-search-input jsonly search-widget-workflow nav-item" 
                                id="search-header" 
                                placeholder="Search" 
                                tabindex="1" 
                                onkeydown="check_key_header(event)" 
                                hidden
                                autofocus />
                        </div>
                      </li>
                  
              

                  
                  
                      
                  <li class="">
                    <div class="donate-button transform_header donate_div">
                      <a class="btn btn-warning nav-btn" id="header-donate-link" role="button" target="_blank" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=A76TAX87ZVR3J">Donate</a>
                    </div>
                  </li>
                      
                  
                
              
              </ul>
          </div>
      </nav>
  </div>
</header>

    <div id="main">
        <div class="container-fluid clear-top">
            
<div id="overflow-container" class="overflow-container">
  <div id="loop-container" class="offset-header container">
    
      <div
        class="blog-font-size post type-post status-publish format-standard category-standard category-travel full-without-featured odd excerpt-1 no-image">
        
        <div class="entry-meta remove-padding-l-r">
          <span>Categories: </span>
          
          <span class="category">
            
            <a href="/blog/text-mining">text mining</a>
          </span>
          
          <span class="category">
            
            <span> | </span>
            
            <a href="/blog/corpus">corpus</a>
          </span>
          
          <span class="category">
            
            <span> | </span>
            
            <a href="/blog/classification">classification</a>
          </span>
          
        </div>
        <div class='entry-header remove-padding-l-r'>
          <h1 class='entry-title'> How to identify fake news with document embeddings</h1>
          <span class="author-blog">
            
            By: Primož Godec and Nikola Đukić,
            
            Oct 15, 2020
          </span>
        </div>
        <div class="entry-container remove-padding-l-r">
          <div class="entry-content md">
            <article>
              <div id="blog_images_">


              <p>Text is described by the sequence of character. Since every machine learning algorithm needs numbers, we need to transform it into vectors of real numbers before we can continue with the analysis. To do this, we can use various approaches. Orange currently offers bag-of-words approach and now also Document embedding by fastText.
In this post, we explain what document embedding is, why it is useful, and show its usage on the classification example.</p>
<h2 id="word-embedding-and-document-embedding">Word embedding and document embedding</h2>
<p>Before we understand document embeddings, we need to understand the concept of word embeddings. Word embedding is a representation of a word in multidimensional spaces such that words with similar meanings have similar embedding. It means that each word is mapped to the vector of real numbers that represents the word.
Embedding models are mostly based on neural networks.</p>
<p>Document embedding is computed in two steps. First, each word is embedded with the word embedding then word embeddings are aggregated. The most common type of aggregation is the average over each dimension.</p>
<h2 id="why-and-when-should-we-use-embedders">Why and when should we use embedders?</h2>
<p>Compared to <a href="/widget-catalog/text-mining/bagofwords-widget">bag-of-words</a>, which counts the number of appearances of each token in the document, embeddings have two main advantages:</p>
<ul>
<li><strong>They do not have a dimensionality problem</strong> The result of bag-of-words is a table which has the number of features equal to the number of unique tokens in all documents in a corpus. Large corpora with long texts result in a large number of unique tokens. It results in huge tables which can exceed memory in the computer. Huge tables also increase the learning and evaluation time of machine learning models. Embedders have constant dimensionality of the vector, which is 300 for fastText embeddings that Orange uses.</li>
<li><strong>Most of the preprocessing is not required</strong> In case of bag-of-words approach, we solve the dimensionality problem with the text preprocessing where we remove tokens (e.g. words) that seem to be less important for the analysis. It can also cause the removal of some important tokens. When using embedders, we do not need to remove tokens, so we are not losing the accuracy this way. Also most of the basic preprocessing can be omitted (such as normalization) in case of fastText embeddings.</li>
<li><strong>They can be pretrained</strong> Word embedding models can be pretrained on large corpora with billions of tokens. That way, they capture the significant characteristics of the language and produce the embeddings of high quality. Pretrained models are then used to obtain embeddings of smaller datasets. Our Document Embedding widget uses pretrained fastText models and is suitable for corpora of any size.</li>
</ul>
<p>The shortcoming of the embedders is that they are difficult to understand. For example, when we use a bag-of-words, we can easily observe which tokens are important for classification with <a href="/widget-catalog/visualize/nomogram/">Nomogram widget</a> since tokens themselves are features. In the case of document embeddings, features are numbers which are not understandable to human by themselves.</p>
<h2 id="document-embedding-widget">Document Embedding widget</h2>
<p>Orange now offers document embedders through Document Embedding widget. We decided to use <a href="https://fasttext.cc/docs/en/crawl-vectors.html">fastText pretrained embedders</a>, which support 157 languages. Orange&rsquo;s Document Embedding widget currently supports 31 most common languages.</p>
<a href="/blog_img/2020/2020-10-15-document-embedding-widget.png" class="blog-image_">
      <img srcset="/blog_img/2020/2020-10-15-document-embedding-widget.png 2x" class="workflow-screenshot" />
</a>
<p>In the widget, the user sets the language of documents and the aggregation method &ndash; it is how embeddings for each word in a document are aggregated into one document embedding.</p>
<h2 id="the-fake-news-dataset">The Fake News dataset</h2>
<p>For this tutorial, we use the sample of <a href="https://www.kaggle.com/c/fake-news/data">Fake News dataset</a>. The dataset sample is available at <a href="http://file.biolab.si/datasets/fake.zip">Orange&rsquo;s file repository</a>. It is a zip archive containing two datasets: training set including 2725 text items and testing set with 275 items. Each item is an article which is labelled as a real or fake.</p>
<h2 id="fake-news-identification">Fake news identification</h2>
<p>Here we present a fake news identification. First, we will load a training part of the dataset with the Corpus widget.</p>
<a href="/blog_img/2020/2020-10-15-corpus.png" class="blog-image_">
      <img srcset="/blog_img/2020/2020-10-15-corpus.png 2x" class="workflow-screenshot" />
</a>
<p>After the dataset is loaded, we make sure that the <code>text</code> variable is selected in the Used text features field. It means that the text in this variable is used in the text analysis. When the dataset is loaded we connect the Corpus widget to the Document embedder widget which will compute text embeddings. Our workflow should look like this now:</p>
<a href="/blog_img/2020/2020-10-15-workflow1.png" class="blog-image_">
      <img srcset="/blog_img/2020/2020-10-15-workflow1.png 2x" class="workflow-screenshot" />
</a>
<p>In the document embeddings widget, we check that language is set to English since texts in this dataset are English. We will use mean (average) aggregation in this experiment &ndash; it is the most standard one. After minute documents are embedded &ndash; embedding progress is shown with the bar around the widget.</p>
<p>When embeddings are ready, we can train models. In this tutorial, we train two models &ndash; Logistic regression and Random forest. We will use default settings for both learners.</p>
<a href="/blog_img/2020/2020-10-15-workflow2.png" class="blog-image_">
      <img srcset="/blog_img/2020/2020-10-15-workflow2.png 2x" class="workflow-screenshot" />
</a>
<p>When our models are trained, we prepare the testing data. To load testing data, we use another Corpus widget and connect it to the Document embedder widget. Settings are the same as before. The only difference is that this time we load testing part of the dataset in the second Corpus widget. To make predictions and inspect the prediction results on the testing dataset, we use the prediction widget.</p>
<a href="/blog_img/2020/2020-10-15-workflow3.png" class="blog-image_">
      <img srcset="/blog_img/2020/2020-10-15-workflow3.png 2x" class="workflow-screenshot" />
</a>
<p>In the bottom part of the widget, we inspect the accuracies. In the column with name CA (classification accuracy), we can see that both models perform with around 80 % accuracy. In the table above, we can find cases where models made mistakes. If we select rows, we can check them in the Corpus Viewer widget which is connected to the Predictions widget. We have also connected the confusion matrix widget to our workflow, which shows the proportions between the predicted and actual classes.</p>
<a href="/blog_img/2020/2020-10-15-confusion.png" class="blog-image_">
      <img srcset="/blog_img/2020/2020-10-15-confusion.png 2x" class="workflow-screenshot" />
</a>
<p>We can see that Logistic regression is slightly more accurate in cases of real news while Random forest model is better for predicting fake news.</p>
<p>It is just one example which shows how to use document embeddings.  You can also use them for other tasks such as clustering, regression or other types of analysis.</p>

            </div>
            </article>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="disqus_thread"></div>
<script>





(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://orange-4.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $('#blog_images_').lightGallery({
        thumbnail: false,
        selector: 'a:has(img)',
        width: '60%',
        mode: 'lg-fade',
        counter: false,
        download: false,
        enableSwipe: false,
        enableDrag: false,
        speed: 1,
        useLeft: true,
        hideBarsDelay: 1000
    });
    });
</script>

        </div>
    </div>
    <footer class="footer">
        <div class="container">
            <div class="row">

                <div class="col-md-4 col-sm-6 col-xs-12">
                    <div class="row">

                        <div class="col-sm-4 sitemap-group">
                            <ul class="links list-sitemap">
                                <li><b><div class="sitemap-cat">Orange</div></b></li>
                                <li><a class="sitemap-sub" href="/faq/">FAQ</a></li>
                                <li><a class="sitemap-sub" href="/license/">License</a></li>
                                <li><a class="sitemap-sub" href="/privacy/">Privacy</a></li>
                                <li><a class="sitemap-sub" href="/citation/">Citation</a></li>
                                <li><a class="sitemap-sub" href="/contact/">Contact</a></li>
                            </ul>
                        </div>

                        <div class="col-sm-4 sitemap-group">
                            <ul class="links list-sitemap">
                                <li><div class="sitemap-cat">Download</div></li>
                                <li><a class="sitemap-sub" href="/download/#windows">Windows</a></li>
                                <li><a class="sitemap-sub" href="/download/#macos">Mac OS</a></li>
                                
                            </ul>
                        </div>

                        <div class="col-sm-4 sitemap-group">

                            <ul class="links list-sitemap">
                                <li><b><div class="sitemap-cat">Community</div></b></li>
                                <li><a class="sitemap-sub" href="https://www.facebook.com/orangedatamining" target="_blank">Facebook</a></li>
                                <li><a class="sitemap-sub" href="https://www.youtube.com/channel/UClKKWBe2SCAEyv7ZNGhIe4g" target="_blank">YouTube</a></li>
                                <li><a class="sitemap-sub" href="https://twitter.com/orangedataminer" target="_blank">Twitter</a></li>
                                <li><a class="sitemap-sub" href="https://datascience.stackexchange.com/questions/tagged/orange" target="_blank">Stack Exchange</a></li>
                                <li><a class="sitemap-sub" href="https://discord.gg/FWrfeXV" target="_blank">Discord</a></li>
                            </ul>

                        </div>

                    </div>
                </div>

                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="row">

                        <div class="col-sm-5 col-md-7 col-lg-6 sitemap-group docs-devs">
                            <ul class="links list-sitemap">
                                <li><div class="sitemap-cat">Documentation</div></li>
                                <li><a class="sitemap-sub" href='/getting-started/'>Get started</a></li>
                                <li><a class="sitemap-sub" href="/widget-catalog/">Widgets</a></li>
                                <li><a class="sitemap-sub" href="http://docs.biolab.si/3/data-mining-library/">Scripting</a></li>
                            </ul>
                        </div>

                        <div class="col-sm-3 sitemap-group">
                            <ul class="links list-sitemap">
                                <li><b><div class="sitemap-cat">Developers</div></b></li>
                                <li><a class="sitemap-sub" target="_blank" href="https://github.com/biolab/orange3">GitHub</a></li>
                                <li><a class="sitemap-sub" target="_blank" href="http://docs.biolab.si/3/development/">Getting Started</a></li>
                            </ul>
                        </div>

                    </div>
                </div>

                <div class="col-md-5 col-sm-12 col-xs-12 sitemap-group">
                    <div class="latest-blog-posts">
                        <ul class="links list-sitemap" style="padding-bottom: 10px">
                            <li><b><a class="sitemap-cat" href="/blog/">Latest blog posts</a></b></li>
                            
                            <li>
                            <div class="row">
                            <div class="col-md-2"><a class="sitemap-sub"> 26 May </a></div>
                            <div class="col-md-10">
                                <a class="sitemap-sub" style="color: #f79211" href="/blog/2023/2023-03-10-pumice-challenge/">Pumice challenge</a>
                            </div>
                            </div>
                            </li>
                            
                            <li>
                            <div class="row">
                            <div class="col-md-2"><a class="sitemap-sub"> 24 Apr </a></div>
                            <div class="col-md-10">
                                <a class="sitemap-sub" style="color: #f79211" href="/blog/2023/2021-03-31-zivjo-orange/">Živjo, Orange!</a>
                            </div>
                            </div>
                            </li>
                            
                            <li>
                            <div class="row">
                            <div class="col-md-2"><a class="sitemap-sub"> 10 Mar </a></div>
                            <div class="col-md-10">
                                <a class="sitemap-sub" style="color: #f79211" href="/blog/2023/2023-03-10-interval-slider/">Interval Sliders</a>
                            </div>
                            </div>
                            </li>
                            
                        </ul>
                    </div>
                </div>

            </div>

            <div class="row footer-pad">
                <div class="col-xs-12">
                    <small class="copyright pull-left"  >Copyright © University of Ljubljana</small>
                </div>
            </div>
        </div>
    </footer>

    </body>
</html>