<html>    
    <head>
    <title>Orange Data Mining - Data Mining for Archaeologists, part II</title>

    
    
    <meta property="og:title" content="Data Mining for Archaeologists, part II">
    
    
    <meta property="og:description" content="Mapping excavation sites in Orange.">
    
    
    <meta property="og:image" content="/blog_img/2021/2021-05-30-archaeology-small.png">
    

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Orange Data Mining Toolbox">
    <meta name="author" content="Bioinformatics Laboratory, University of Ljubljana">
    <meta name="google-site-verification" content="DS7GH5M7ABi78pIC2rMcTBFx-UeBFObXOeLvR7Ow3EQ" />
    <link rel="shortcut icon" href="/images/favicon.ico">
    
    <link href='https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Covered+By+Your+Grace' rel='stylesheet' type='text/css'>
    
    <link rel="stylesheet" href="/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/plugins/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="/plugins/lightgallery/css/lightgallery.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="/build/css/styles.min.css">
    <script id="dsq-count-scr" src="//orange-4.disqus.com/count.js" async></script>

     <script src="https://www.recaptcha.net/recaptcha/api.js" async defer></script>
    <noscript>
        <style>
            .jsonly { display: none !important; }
        </style>
    </noscript>
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-528382-1', 'auto');
      ga('require', 'linkid');
      ga('send', 'pageview');


    </script>




    <script type="text/javascript" src="/plugins/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="/plugins/jquery.form.js"></script>
    <script type="text/javascript" src="/plugins/bootstrap/js/bootstrap.min.js"></script>
    
    <script type="text/javascript" src="/plugins/lightgallery/js/lightgallery.js"></script>
    <script type="text/javascript" src="/plugins/lightgallery/js/lg-thumbnail.js"></script>
    <script type="text/javascript" src="/plugins/lightgallery/js/lg-video.js"></script>
    <script type="text/javascript" src="/plugins/lightgallery/js/lg-zoom.js"></script>
    <script type="text/javascript" src="/js/custom.js"></script>
    <script type="text/javascript" src="/js/header_helpers.js"></script>


    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-T5X4T27');</script>
    

    
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T5X4T27"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    

    
    <script type="text/javascript">
      $( document ).ready( function () {

        $('a').off("click").click( function ( event ) {
           ga('send', 'event', "a", event.type, $(this).attr("id"), 1 );
        });

        $('[class *= trackClicks_]').off("click").click( function ( event ) {
           var classList = $(this).attr('class').split(/\s+/);
           var trackname = "";
           $.each(classList, function(index, item) {
             if (item.indexOf('trackClicks_') === 0) {
                trackname = item;
             }
           });
           ga('send', 'event', "a", event.type, trackname, 1 );
        });
      });
    </script>

</head>

    <body>

     <header id="top" class="header navbar-fixed-top">
        <div class="container" >
            <h1 class="logo pull-left" >
                <a id="header-orangelogo" href="/">
                    <img id="logo-image" class="logo-image" src="/images/orange_logo_hq.png" alt="Logo">
                </a>
            </h1>
            <nav id="main-nav" class="main-nav navbar-right" role="navigation">
                <div class="navbar-header">
                    <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
               <div class="navbar-collapse collapse" id="navbar-collapse">
                    <ul class="nav navbar-nav">

                        

                        
                        
                            
                            <li class="nav-item"><a id="header-screenshots-link"  href="/screenshots/">Screenshots</a></li>
                            
                        
                      
                    

                        
                        
                            
                            <li class="nav-item"><a id="header-screenshots-link"  href="/workflows/">Workflows</a></li>
                            
                        
                      
                    

                        
                        
                            
                            <li class="nav-item"><a id="header-screenshots-link"  href="/download/">Download</a></li>
                            
                        
                      
                    

                        
                        
                            
                            <li class="nav-item"><a id="header-screenshots-link"  href="/blog/">Blog</a></li>
                            
                        
                      
                    

                        
                        
                            
                            <li class="nav-item"><a id="header-screenshots-link"  href="/docs/">Docs</a></li>
                            
                        
                      
                    

                        
                        
                            
                            <li class="nav-item"><a id="header-screenshots-link"  href="/training/">Workshops</a></li>
                            
                        
                      
                    

                        
                              <li class="input_search nav-item">
                                <div class="header-search-input transform_header" hidden>
                                  <input type="text" class="jsonly search-widget-workflow nav-item" id="search-header" style="margin-top: 8px" placeholder="Search" tabindex="1" onkeydown="check_key_header(event)" autofocus />
                                </div>
                              </li>
                              <li class="">
                                <div class="">

                                <a class="btn header-search-button btn-warning big-button-base donate fa fa-search" id="searchBtn" role="button" onClick="header_search()">

                                </a>
                              </div>
                              </li>
                        
                    

                        
                        
                            
                        <li class="">
                          <div class="donate-button transform_header donate_div" hidden>
                            <a class="btn btn-warning big-button-base donate" id="header-donate-link" role="button" target="_blank" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=A76TAX87ZVR3J">Donate</a>
                          </div>
                        </li>
                            
                        
                      
                    
                    </ul>
                </div>
            </nav>
        </div>
    </header>

    <div id="main">
        <div class="container-fluid clear-top">
            
<div id="overflow-container" class="overflow-container">
  <div id="loop-container" class="offset-header container">
    
      <div
        class="blog-font-size post type-post status-publish format-standard category-standard category-travel full-without-featured odd excerpt-1 no-image">
        
        <div class="entry-meta remove-padding-l-r">
          <span>Categories: </span>
          
          <span class="category">
            
            <a href="/blog/archaeology">archaeology</a>
          </span>
          
          <span class="category">
            
            <span> | </span>
            
            <a href="/blog/workshop">workshop</a>
          </span>
          
          <span class="category">
            
            <span> | </span>
            
            <a href="/blog/preprocess">preprocess</a>
          </span>
          
          <span class="category">
            
            <span> | </span>
            
            <a href="/blog/geolocation">geolocation</a>
          </span>
          
          <span class="category">
            
            <span> | </span>
            
            <a href="/blog/maps">maps</a>
          </span>
          
        </div>
        <div class='entry-header remove-padding-l-r'>
          <h1 class='entry-title'> Data Mining for Archaeologists, part II</h1>
          <span class="author-blog">
            
            By: Ajda Pretnar,
            
            May 30, 2021
          </span>
        </div>
        <div class="entry-container remove-padding-l-r">
          <div class="entry-content md">
            <article>
              <div id="blog_images_">


              <p>This is the second part of a blog on archaeological data analysis in Orange. In the first part, we wrote about image analytics and how to predict amphora types. This blog will show a simpler analysis, where we will plot excavation sites onto maps and interpret the results.</p>
<p>Related: <a href="blog/2021/2021-04-23-archaeology-workshop/" target="_blank">Data Mining for Archaeologists, part I</a></p>
<p>This time we will be working with the pottery data from the <a href="https://archaeologydataservice.ac.uk/archives/view/antikythera_ahrc_2012/index.cfm">Antikythera Survey Project</a>. You can <a href="https://archaeologydataservice.ac.uk/catalogue/adsdata/arch-1115-2/dissemination/csv/pottery/pottery.csv&amp;hs=true">download the data</a> (pottery.csv) or simply copy-paste the below link in the <strong>File</strong> widget&rsquo;s URL line.</p>
<p><a href="https://archaeologydataservice.ac.uk/catalogue/adsdata/arch-1115-2/dissemination/csv/pottery/pottery.csv&amp;hs=true">https://archaeologydataservice.ac.uk/catalogue/adsdata/arch-1115-2/dissemination/csv/pottery/pottery.csv&amp;hs=true</a></p>
<a href="/blog_img/2021/2021-05-30-file.png" class="blog-image_"> 
      <img src="/blog_img/2021/2021-05-30-file.png" class="window-screenshot" />
 </a>


<p>All is well, out data is here. Let us check it in the Box Plot, to see what are the distributions of our features.</p>
<a href="/blog_img/2021/2021-05-30-box-plot.png" class="blog-image_"> 
      <img src="/blog_img/2021/2021-05-30-box-plot.png" class="window-screenshot" />
 </a>


<a href="/blog_img/2021/2021-05-30-workflow1.png" class="blog-image_">
      <img srcset="/blog_img/2021/2021-05-30-workflow1.png 2x" class="workflow-screenshot" />
</a>
<p>Hmmm, it seems like the <em>VesselPart</em> feature contains a lot of bodies (B), bases (Ba), handles (H) and rims (R), while other shard parts are significantly less represented. Machine learning doesn&rsquo;t handle discrete features with many values very well, so we will preprocess the data to make it easier to interpret and handle downstream.</p>
<a href="/blog_img/2021/2021-05-30-edit-domain1.png" class="blog-image_"> 
      <img src="/blog_img/2021/2021-05-30-edit-domain1.png" class="window-screenshot" />
 </a>


<p>For data preprocessing, we will use <strong>Edit Domain</strong>. Let us select <em>VesselPart</em>. Feature values will be shown on the right. One option would be to manually merge values together, say <em>Ba?</em> and <em>Ba</em>. We do this by selecting the two values and clicking M in the lower right corner. <em>Group selected values</em> will group them together. Don&rsquo;t forget to give them a name, say <em>Ba_all</em>.</p>
<a href="/blog_img/2021/2021-05-30-edit-domain2.png" class="blog-image_"> 
      <img src="/blog_img/2021/2021-05-30-edit-domain2.png" class="window-screenshot" />
 </a>


<p>To avoid doing this for a large number of values, Edit Domain offers a nice way to merge infrequent values together. The final option is called <em>Group all except N most frequent values</em>, where we can set the N ourselves. We know from Box Plot there are 4 fairly frequent values, while the others are less frequent. So let us select 4.</p>
<a href="/blog_img/2021/2021-05-30-edit-domain1.png" class="blog-image_"> 
      <img src="/blog_img/2021/2021-05-30-edit-domain1.png" class="window-screenshot" />
 </a>


<p>In the widget, you will see that all infrequent values are now merged and will appear under the label <em>other</em>. You can do the same for other features. Don&rsquo;t forget to press <em>Apply</em> once you are done with preprocessing.</p>
<p>Check the results in a Box Plot. Much better!</p>
<a href="/blog_img/2021/2021-05-30-box-plot2.png" class="blog-image_"> 
      <img src="/blog_img/2021/2021-05-30-box-plot2.png" class="window-screenshot" />
 </a>


<p>Now, let us plot the data on a map. You might have noticed the pottery shards have a location, where they were excavated (XSugg and YSugg). Unfortunately, these coordinates are encoded in an <em>EPSG:32634</em> system, so we will have to transform them to the more common <em>EPSG:4326</em> projection.</p>
<p>For this, we will need <em>pyproj</em> package, which you can install by going to Options - Add-ons. In the upper right corner, you will see <em>Add more&hellip;</em> option. Select it. Now enter <em>pyproj</em> in the field. It will appear in the list of possible add-ons. Select it and run the installation.</p>
<a href="/blog_img/2021/2021-05-30-pyproj.png" class="blog-image_"> 
      <img src="/blog_img/2021/2021-05-30-pyproj.png" class="window-screenshot" />
 </a>


<p>Once <em>pyproj</em> is installed, you can use <strong>Python Script</strong> widget to transform any projection to another one. Copy-paste the below script in the widget and run it.</p>
<pre><code>from pyproj import Transformer
from Orange.data import ContinuousVariable

new_lon = []
new_lat = []
transformer = Transformer.from_crs(&quot;epsg:32634&quot;, &quot;epsg:4326&quot;)

for i in range(len(in_data)):
    lat, lon = transformer.transform(in_data[i][0], in_data[i][1])
    new_lat.append(lat)
    new_lon.append(lon)
    
out = in_data.add_column(ContinuousVariable(&quot;lat&quot;), new_lat)
out_data = out.add_column(ContinuousVariable(&quot;lon&quot;), new_lon)
</code></pre><p>To avoid installing <em>pyproj</em>, <a href="file.biolab.si/datasets/pottery.tab">here</a> is the transformed data set. Load it with the File widget and continue along.</p>
<p>At last, it is time to plot the data on a map. For this, you will need <strong>Geo</strong> add-on, which you can also install in Options - Add-ons.</p>
<p>Connect <strong>Geo Map</strong> widget to <strong>Python Script</strong> (or directly to the <strong>File</strong> widget if you are using transformed data). Geo Map will automatically try to find latitude and longitude features. As with most visualizations in Orange, you can use other features to enhance the information gained from the plot. Let us use the <em>VesselPart</em> feature for coloring the points on the map.</p>
<a href="/blog_img/2021/2021-05-30-map.png" class="blog-image_"> 
      <img src="/blog_img/2021/2021-05-30-map.png" class="window-screenshot" />
 </a>


<a href="/blog_img/2021/2021-05-30-workflow2.png" class="blog-image_">
      <img srcset="/blog_img/2021/2021-05-30-workflow2.png 2x" class="workflow-screenshot" />
</a>
<p>Now for some homework: in which part of the island are located shards from the Hellenic period? (Hint: Use Select Rows and set the <em>Hell</em> value to be higher than 70, then plot the subset on the map.)</p>

            </div>
            </article>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="disqus_thread"></div>
<script>





(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://orange-4.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $('#blog_images_').lightGallery({
        thumbnail: false,
        selector: 'a:has(img)',
        width: '60%',
        mode: 'lg-fade',
        counter: false,
        download: false,
        enableSwipe: false,
        enableDrag: false,
        speed: 1,
        useLeft: true,
        hideBarsDelay: 1000
    });
    });
</script>

        </div>
    </div>
    <footer class="footer">
        <div class="container">
            <div class="row">

                <div class="col-md-4 col-sm-6 col-xs-12">
                    <div class="row">

                        <div class="col-sm-4 sitemap-group">
                            <ul class="links list-sitemap">
                                <li><b><div class="sitemap-cat">Orange</div></b></li>
                                <li><a class="sitemap-sub" href="/faq/">FAQ</a></li>
                                <li><a class="sitemap-sub" href="/license/">License</a></li>
                                <li><a class="sitemap-sub" href="/privacy/">Privacy</a></li>
                                <li><a class="sitemap-sub" href="/citation/">Citation</a></li>
                                <li><a class="sitemap-sub" href="/contact/">Contact</a></li>
                            </ul>
                        </div>

                        <div class="col-sm-4 sitemap-group">
                            <ul class="links list-sitemap">
                                <li><div class="sitemap-cat">Download</div></li>
                                <li><a class="sitemap-sub" href="/download/#windows">Windows</a></li>
                                <li><a class="sitemap-sub" href="/download/#macos">Mac OS</a></li>
                                
                            </ul>
                        </div>

                        <div class="col-sm-4 sitemap-group">

                            <ul class="links list-sitemap">
                                <li><b><div class="sitemap-cat">Community</div></b></li>
                                <li><a class="sitemap-sub" href="https://www.facebook.com/orangedatamining" target="_blank">Facebook</a></li>
                                <li><a class="sitemap-sub" href="https://www.youtube.com/channel/UClKKWBe2SCAEyv7ZNGhIe4g" target="_blank">YouTube</a></li>
                                <li><a class="sitemap-sub" href="https://twitter.com/orangedataminer" target="_blank">Twitter</a></li>
                                <li><a class="sitemap-sub" href="https://datascience.stackexchange.com/questions/tagged/orange" target="_blank">Stack Exchange</a></li>
                                <li><a class="sitemap-sub" href="https://discord.gg/FWrfeXV" target="_blank">Discord</a></li>
                            </ul>

                        </div>

                    </div>
                </div>

                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="row">

                        <div class="col-sm-5 col-md-7 col-lg-6 sitemap-group docs-devs">
                            <ul class="links list-sitemap">
                                <li><div class="sitemap-cat">Documentation</div></li>
                                <li><a class="sitemap-sub" href='/getting-started/'>Get started</a></li>
                                <li><a class="sitemap-sub" href="/widget-catalog/">Widgets</a></li>
                                <li><a class="sitemap-sub" href="http://docs.biolab.si/3/data-mining-library/">Scripting</a></li>
                            </ul>
                        </div>

                        <div class="col-sm-3 sitemap-group">
                            <ul class="links list-sitemap">
                                <li><b><div class="sitemap-cat">Developers</div></b></li>
                                <li><a class="sitemap-sub" target="_blank" href="https://github.com/biolab/orange3">GitHub</a></li>
                                <li><a class="sitemap-sub" target="_blank" href="http://docs.biolab.si/3/development/">Getting Started</a></li>
                            </ul>
                        </div>

                    </div>
                </div>

                <div class="col-md-5 col-sm-12 col-xs-12 sitemap-group">
                    <div class="latest-blog-posts">
                        <ul class="links list-sitemap" style="padding-bottom: 10px">
                            <li><b><a class="sitemap-cat" href="/blog/">Latest blog posts</a></b></li>
                            
                            <li>
                            <div class="row">
                            <div class="col-md-2"><a class="sitemap-sub"> 17 Sep </a></div>
                            <div class="col-md-10">
                                <a class="sitemap-sub" style="color: #f79211" href="/blog/2021/2021-09-17-semantic-analysis/">Semantic Analysis of Documents</a>
                            </div>
                            </div>
                            </li>
                            
                            <li>
                            <div class="row">
                            <div class="col-md-2"><a class="sitemap-sub"> 15 Sep </a></div>
                            <div class="col-md-10">
                                <a class="sitemap-sub" style="color: #f79211" href="/blog/2021/2021-09-15-connlu-files/">New in Orange: Support for CONLL-U files</a>
                            </div>
                            </div>
                            </li>
                            
                            <li>
                            <div class="row">
                            <div class="col-md-2"><a class="sitemap-sub"> 13 Aug </a></div>
                            <div class="col-md-10">
                                <a class="sitemap-sub" style="color: #f79211" href="/blog/2021/2021-08-13-apply-domain/">Why You Should Use Apply Domain</a>
                            </div>
                            </div>
                            </li>
                            
                        </ul>
                    </div>
                </div>

            </div>

            <div class="row footer-pad">
                <div class="col-xs-12">
                    <small class="copyright pull-left"  >Copyright © University of Ljubljana</small>
                </div>
            </div>
        </div>
    </footer>

    </body>
</html>